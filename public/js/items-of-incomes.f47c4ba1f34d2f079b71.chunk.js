(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"2ZIR":function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),s=a.n(i),n=a("Aozi"),o=a("L2JU"),l=a("OafC"),r=a("P2sY"),c=a.n(r),m=a("VXvu"),d=a("57zi"),u=new n.a,f={name:"ItemElement",props:{item:{type:Object,required:!0}},data:function(){return{formTitle:"New",processing:!1,formData:{id:null,name:"",parent_id:null,active:!0,comment:""}}},components:{"tm-input":m.a,"tm-checkbox":d.a},computed:s()({},Object(o.b)({itemslist:"allIncomeItems"}),{parent:{get:function(){var t=this;if(this.formData.parent_id){var e=this.itemslist.find(function(e){return e.id===t.formData.parent_id});return void 0!=e?e:null}return null},set:function(t){t instanceof Object&&t.hasOwnProperty("id")?this.formData.parent_id=t.id:this.formData.parent_id=null}}}),created:function(){this.formData=c()({},this.item),console.dir(this.item),console.dir(this.formData),this.title=this.item.id?this.item.name:"new"},methods:{close:function(){this.$emit("close")},save:function(){var t=this;this.processing=!0,(null===this.formData.id?u.store("itemsincome",this.formData):u.update("itemsincome",this.formData.id,this.formData)).then(function(e){t.close()}).catch(function(t){alert("Error!")}).finally(function(){t.processing=!1})}}},p=a("KHd+"),v=a("ZUTo"),h=a.n(v),b=a("gzZi"),_=a("jjY0"),g=Object(p.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card",staticStyle:{height:"100%"}},[a("div",{staticClass:"card-header appColor text-white"},[t._v("\n        "+t._s(t.formTitle)+"\n    ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row d-flex"},[a("div",{staticClass:"col-xs-12"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"form-group mx-1"},[a("label",{staticClass:"tm-lable",attrs:{for:"parent_select"}},[t._v("Parent:")]),t._v(" "),a("tm-select",{attrs:{id:"parent_select",options:t.itemslist,title:"name",clearable:!0,"select-btn":!1,placeholder:"Select parent"},model:{value:t.parent,callback:function(e){t.parent=e},expression:"parent"}})],1)])])]),t._v(" "),a("div",{staticClass:"row d-flex"},[a("div",{staticClass:"col-xs-12"},[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"form-group mx-1"},[a("label",{staticClass:"tm-lable",attrs:{for:"item_income_title"}},[t._v("Title:")]),t._v(" "),a("tm-input",{attrs:{placeholder:"Title",id:"item_income_title","input-type":"text",clearable:!0},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group mx-1"},[a("div",{staticClass:"d-flex justify-start"},[a("tm-checkbox",{model:{value:t.formData.active,callback:function(e){t.$set(t.formData,"active",e)},expression:"formData.active"}}),t._v(" "),a("p",{staticClass:"tm-lable ml-2"},[t._v("The item is active")])],1)])])]),t._v(" "),a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:this.processing,expression:"this.processing"}],staticClass:"my-0",attrs:{indeterminate:!0}}),t._v(" "),a("div",{staticClass:"card-footer text-muted"},[a("div",{staticClass:"row d-flex justify-content-between"},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{disabled:this.processing,color:"green darken-3",flat:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("\n                Save\n            ")])],1)])],1)},[],!1,null,"6c1ba2bd",null),w=g.exports;h()(g,{VBtn:b.a,VProgressLinear:_.a});new n.a;var x={data:function(){return{headers:[{text:"Name",value:"name"}],dialog:!1,editedIndex:-1,processing:!1,formData:{id:null,name:"",parent_id:null,active:!0,comment:""}}},components:{"tm-tree":l.a,"tm-item":w},computed:s()({},Object(o.b)({items:"allIncomeItemsHierarchically",itemslist:"allIncomeItems"}),{parent:{get:function(){var t=this;if(this.formData.parent_id){var e=this.itemslist.find(function(e){return e.id===t.formData.parent_id});return void 0!=e?e:null}return null},set:function(t){t instanceof Object&&t.hasOwnProperty("id")?this.formData.parent_id=t.id:this.formData.parent_id=null}}}),beforeMount:function(){this.$store.state.title="Income items",this.$store.dispatch("getAllIncomeItemsHierarchically"),this.$store.commit("setupToolbarMenu",this.getUpMenu())},watch:{dialog:function(t){t||this.close()}},methods:{getUpMenu:function(){var t=this;return{mainAction:{title:"add",icon:"add",action:function(){t.add()}},menu:[{title:"update",icon:"update",action:function(){t.update()}}]}},add:function(){this.formTitle="New",this.formData={id:null,name:"",parent_id:null,active:!0,comment:""},this.dialog=!0},update:function(){this.$store.dispatch("getAllIncomeItemsHierarchically")},openFormElement:function(t){this.copyObject(this.formData,t),this.dialog=!0},close:function(){this.dialog=!1,this.update()}}},D=a("FpqX"),C=a("pyJu"),y=Object(p.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:""}},[t.dialog?a("v-dialog",{attrs:{"max-width":"500",persistent:"",fullscreen:t.$vuetify.breakpoint.smAndDown},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("tm-item",{attrs:{item:t.formData},on:{close:t.close}})],1):t._e(),t._v(" "),a("div",{staticClass:"table-wrapper"},[a("tm-tree",{attrs:{items:t.items},on:{itemclick:t.openFormElement}})],1)],1)},[],!1,null,null,null);e.default=y.exports;h()(y,{VDialog:D.a,VLayout:C.a})}}]);