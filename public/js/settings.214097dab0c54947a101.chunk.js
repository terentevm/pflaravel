(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+eob":function(e,t,s){"use strict";s.r(t);var r=s("QbLZ"),i=s.n(r),l=s("L2JU"),o=s("jjY0"),a=s("LbRV"),c={data:function(){return{formModified:!1,showWalletSelection:!1,processing:!1,showAlert:!1,alertType:"success",message:"",dirtyElements:[]}},components:{VProgressLinear:o.a,VSnackbar:a.a},computed:i()({},Object(l.c)({currencies:function(e){return e.currencies.all},wallets:function(e){return e.wallets.all},currency:function(e){return e.settings.currency},periods:function(e){return e.dashboard.dashboardSettings.periodicityOptions}}),{currencyReports:{get:function(){return this.$store.state.settings.reportcurrency},set:function(e){this.formModified=!0,this.dirtyElements.includes("currencyReports")||this.dirtyElements.push("currencyReports"),this.$store.commit("setCurrencyReports",e)}},wallet:{get:function(){return this.$store.state.settings.wallet},set:function(e){this.formModified=!0,this.dirtyElements.includes("wallet")||this.dirtyElements.push("wallet"),this.$store.commit("setWallet",e)}},periodicity:{get:function(){return this.$store.state.dashboard.dashboardSettings.periodicity},set:function(e){this.$store.commit("setPeriodicity",e)}}}),beforeMount:function(){this.$store.state.title="Settings",this.$store.commit("setupToolbarMenu",{}),this.$store.dispatch("initializeDashboardSettings"),this.$store.dispatch("getAllWallets"),this.$store.dispatch("getAllCurrencies"),this.$store.dispatch("getSettings")},methods:{openWalletSelectForm:function(){this.showWalletSelection=!0},completeWalletSelectionHandler:function(e){e instanceof Object&&(this.formModified=!0,this.$store.commit("setWallet",e)),this.showWalletSelection=!1},isDirty:function(e){return this.dirtyElements.includes(e)},snackBarColor:function(){return"success"==this.alertType?"success":"error"},storeChanges:function(){var e=this;this.processing=!0,this.showAlert=!1,this.$store.dispatch("storeSettings").then(function(){e.processing=!1,e.formModified=!1,e.dirtyElements=[],e.message="Stored successfully",e.alertType="success",e.showAlert=!0}).catch(function(t){var s="n/a",r="Error";t instanceof Object&&t.hasOwnProperty("status")&&(s=t.status),t instanceof Object&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("error")&&(r=t.data.error),e.processing=!1,e.message="("+s+") "+r,e.alertType="error",e.showAlert=!0})}}},n=(s("7yMK"),s("KHd+")),d=s("ZUTo"),u=s.n(d),p=s("gzZi"),h=Object(n.a)(c,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-12 col-md-5 "},[s("div",{staticClass:"row d-block"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"tm-lable",attrs:{for:"settings_currency_el"}},[e._v("Currency (read only):")]),e._v(" "),s("tm-select",{attrs:{id:"settings_currency_el",options:e.currencies,title:"name",clearable:!0,"select-btn":!0,placeholder:"Select main wallet","read-only":!0},model:{value:e.currency,callback:function(t){e.currency=t},expression:"currency"}})],1)]),e._v(" "),s("div",{staticClass:"row d-block"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"tm-lable",attrs:{for:"settings_main_wallet_el"}},[e._v("Default wallet"),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isDirty("wallet"),expression:"isDirty('wallet')"}]},[e._v(" *")]),e._v(":")]),e._v(" "),s("tm-select",{attrs:{id:"settings_main_wallet_el",options:e.wallets,title:"name",clearable:!0,"select-btn":!0,placeholder:"Select main wallet"},on:{open:e.openWalletSelectForm},model:{value:e.wallet,callback:function(t){e.wallet=t},expression:"wallet"}})],1)]),e._v(" "),s("div",{staticClass:"row d-block "},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"tm-lable",attrs:{for:"settings_rep_currency_el"}},[e._v("Currency of dashboard"),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isDirty("currencyReports"),expression:"isDirty('currencyReports')"}]},[e._v(" *")]),e._v(":")]),e._v(" "),s("tm-select",{attrs:{id:"settings_rep_currency_el",options:e.currencies,title:"name",clearable:!0,"select-btn":!0,placeholder:"Select currency for reports"},model:{value:e.currencyReports,callback:function(t){e.currencyReports=t},expression:"currencyReports"}})],1)]),e._v(" "),s("div",{staticClass:"row d-flex px-0 px-sm-3"},[e.formModified?s("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:this.processing},on:{click:e.storeChanges}},[e._v("Store changes")]):e._e()]),e._v(" "),s("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:this.processing,expression:"this.processing"}],attrs:{indeterminate:!0}})],1),e._v(" "),s("div",{staticClass:"col-xs-0 col-sm-0 col-md-2 "}),e._v(" "),s("tm-wallets-select-form",{attrs:{items:this.wallets,showWalletSelection:this.showWalletSelection},on:{"select-wallets-close":e.completeWalletSelectionHandler}}),e._v(" "),s("div",{staticClass:"col-xs-12 col-sm-12 col-md-5"},[s("div",{staticClass:"row d-block"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"tm-lable",attrs:{for:"settings_dash_period_el"}},[e._v("Periodicity:")]),e._v(" "),s("tm-select",{attrs:{id:"settings_dash_period_el",options:e.periods,title:"period",clearable:!0,"select-btn":!1,placeholder:"Select currency for reports"},model:{value:e.periodicity,callback:function(t){e.periodicity=t},expression:"periodicity"}})],1)])])],1),e._v(" "),s("v-snackbar",{attrs:{color:e.snackBarColor()},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[e._v("\n        "+e._s(e.message)+"\n        "),s("v-btn",{attrs:{color:"white",flat:""},on:{click:function(t){e.showAlert=!1}}},[e._v("Close")])],1)],1)},[],!1,null,null,null);t.default=h.exports;u()(h,{VBtn:p.a,VProgressLinear:o.a,VSnackbar:a.a})},"7yMK":function(e,t,s){"use strict";var r=s("l26r");s.n(r).a},l26r:function(e,t,s){}}]);