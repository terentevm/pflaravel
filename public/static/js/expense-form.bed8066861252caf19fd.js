webpackJsonp([3],{"0v3r":function(e,t){},T2YC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("woOf"),o=n.n(s),i=n("pFYg"),a=n.n(i),l=n("Dd8w"),r=n.n(l),c=n("bOdI"),u=n.n(c),d=n("/k93"),m=n("ugb0"),v=n("uIez"),f=n("NYxO"),p={props:["docId"],data:function(){var e;return e={menu:!1,toggle_multiple:[0,1],selected:[],countRows:0,currentRow:0,editRow:{index:null,item:null,sum:0,comment:""},headers:[{text:"Category of expence",align:"left",sortable:!0,value:"item"},{text:"Amount",value:"sum",align:"left"},{text:"Comment",value:"comment",align:"left",class:"hidden-sm-and-down"}]},u()(e,"menu",!1),u()(e,"modal",!1),u()(e,"active",null),u()(e,"dialog",!1),u()(e,"showWalletSelection",!1),u()(e,"processing",!1),e},components:{"tm-editRow":m.a,"v-data-table":d.o},computed:r()({wallet:{get:function(){return this.$store.state.expenses.expenseObj.wallet},set:function(e){this.$store.commit("expenseUpdateWallet",e)}}},Object(f.c)({id:function(e){return e.expenses.expenseObj.id},date:function(e){return e.expenses.expenseObj.date},currency:function(e){return e.expenses.expenseObj.currency},rows:function(e){return e.expenses.expenseObj.rows},closeForm:function(e){return e.expenses.closeForm}}),Object(f.b)({wallets:"allWallets",items:"allExpenseItems"}),{totalAmount:function(){var e=this.rows.reduce(function(e,t){return e+Number(t.sum)},0);return v.a.round2(e)}}),beforeMount:function(){this.$store.state.title="Expense",this.$store.commit("setupToolbarMenu",[]),this.$store.commit("setupToolbarMenu",this.getUpMenu()),this.$store.dispatch("getSettings"),this.$store.dispatch("getAllWallets"),this.$store.dispatch("getAllExpenseItems"),this.$store.dispatch("getExpense",this.docId)},watch:{closeForm:function(e,t){!0===e&&this.$router.push({path:"/expends"})}},methods:{getUpMenu:function(){var e=this;return{mainAction:{title:"Save",icon:"done",action:function(){e.save()}},menu:[{title:"Cancel",icon:"exit_to_app",action:function(){e.cancel()}}]}},startWalletChoice:function(){this.showWalletSelection=!0},completeWalletSelectionHandler:function(e){void 0!==e&&"object"===(void 0===e?"undefined":a()(e))&&this.walletOnChange(e),this.showWalletSelection=!1},deleteSelected:function(){this.$store.commit("deleteSelected",this.selected)},toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.rows.slice()},dateOnChange:function(e){this.$store.commit("expenseUpdateDate",e)},walletOnChange:function(e){this.$store.commit("expenseUpdateWallet",e)},editCurrentRow:function(e){this.editRow=o()({},e),this.editRow.index=this.rows.indexOf(e),this.dialog=!0},addNewLine:function(){this.tempRow=null,this.editRow={index:null,item:null,sum:0,comment:""},this.dialog=!0},closeEditRowDialog:function(){this.dialog=!1},saveRow:function(e){if(this.dialog=!1,e.item){if(null===e.index){var t=this.maxRowId();e.rowId=++t}this.$store.commit("expenseEditRow",e),this.editRow={index:null,item:null,sum:0,comment:""}}},maxRowId:function(){if(0==this.rows.length)return 0;var e=this.rows.reduce(function(e,t){return Math.max(e,t.rowId)},0);return e},deleteRow:function(e){this.$store.commit("expenseDeleteRow",e)},openFormItems:function(){this.dialog=!0},chooseItem:function(e){this.editRow.item=e,this.dialog=!1},save:function(){var e=this;this.processing=!0,this.$store.dispatch("saveExpense").then(function(){e.processing=!1,e.$router.push({path:"/expends"})}).catch(function(t){e.processing=!1})},cancel:function(){this.$router.push({path:"/expends"})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{staticClass:"expense-from"},[n("v-container",[n("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:1==this.processing,expression:"this.processing == true"}],attrs:{indeterminate:!0}}),e._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-text-field",{attrs:{slot:"activator",value:e.date,label:"Date",type:"date",dense:"","prepend-icon":"event",readonly:""},on:{change:e.dateOnChange},slot:"activator"}),e._v(" "),n("v-date-picker",{attrs:{value:e.date},on:{change:e.dateOnChange,input:function(t){e.menu=!1}}})],1)],1)],1),e._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg6:""}},[n("v-select",{attrs:{items:e.wallets,value:e.wallet,"menu-props":"auto",label:"Wallet","item-text":"name","item-value":"id","return-object":"","prepend-icon":"account_balance_wallet","append-outer-icon":"pageview"},on:{"click:append-outer":e.startWalletChoice},model:{value:e.wallet,callback:function(t){e.wallet=t},expression:"wallet"}})],1)],1),e._v(" "),n("tm-wallets-select-form",{attrs:{items:this.wallets,showWalletSelection:this.showWalletSelection},on:{"select-wallets-close":e.completeWalletSelectionHandler}})],1)],1),e._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[n("tm-editRow",{attrs:{items:e.items,editRow:e.editRow,dialog:e.dialog},on:{close:e.closeEditRowDialog,done:e.saveRow}}),e._v(" "),n("div",{staticClass:"from-table-wrapper"},[n("v-toolbar",{attrs:{color:"appColor",dense:"",dark:""}},[n("v-toolbar-items",[n("v-btn",{attrs:{flat:"",dark:""},on:{click:function(t){return e.addNewLine()}}},[n("v-icon",{attrs:{left:"",dark:""}},[e._v("add")]),e._v("\n                                Add\n                            ")],1),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:this.selected.length>0,expression:"this.selected.length > 0"}],attrs:{flat:"",dark:""},on:{click:function(t){return e.deleteSelected()}}},[n("v-icon",[e._v("delete")]),e._v("\n                                Delete\n                            ")],1)],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-title",{attrs:{color:"white"}},[e._v("Total: "+e._s(e.totalAmount)+" ("+e._s(e.currency.short_name)+")\n                        ")])],1),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{"select-all":"",headers:e.headers,items:e.rows,"item-key":"rowId",id:"table-of-expenses"},scopedSlots:e._u([{key:"headers",fn:function(t){return[n("th",[n("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,primary:"","hide-details":""},on:{click:e.toggleAll}})],1),e._v(" "),e._l(t.headers,function(t){return n("th",{key:t.text,class:t.class,attrs:{align:t.align}},[e._v("\n                                "+e._s(t.text)+"\n                            ")])})]}},{key:"items",fn:function(t){return[n("tr",[n("td",{staticClass:"d-none"},[e._v(e._s(t.item.item))]),e._v(" "),n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),e._v(" "),n("td",{staticClass:"text-xs-left",on:{click:function(n){return e.editCurrentRow(t.item)}}},[e._v("\n                                    "+e._s(t.item.item.name)+"\n                                ")]),e._v(" "),n("td",{staticClass:"text-xs-left",on:{click:function(n){return e.editCurrentRow(t.item)}}},[e._v("\n                                    "+e._s(t.item.sum)+"\n                                ")]),e._v(" "),n("td",{staticClass:"text-xs-left hidden-sm-and-down",on:{click:function(n){return e.editCurrentRow(t.item)}}},[e._v("\n                                    "+e._s(t.item.comment)+"\n                                ")])])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._v(" "),e._v(" "),n("template",{slot:"no-data"},[n("v-alert",{attrs:{value:!0,type:"info",icon:"warning"}},[e._v('To add a new expense, click "Add"\n                            ')])],1)],2)],1)],1)],1)],1)],1)},staticRenderFns:[]};var w=n("VU/8")(p,h,!1,function(e){n("0v3r")},"data-v-89ebfcb6",null);t.default=w.exports},bOdI:function(e,t,n){"use strict";t.__esModule=!0;var s,o=n("C4MV"),i=(s=o)&&s.__esModule?s:{default:s};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},u8bN:function(e,t){},ugb0:function(e,t,n){"use strict";var s=n("uIez"),o={name:"AddRowFrom",props:{dialog:{type:Boolean,default:!1},editRow:{type:Object},items:{type:Array,default:[]}},data:function(){return{fullscreen:!1}},computed:{amount:{get:function(){return this.editRow.sum},set:function(e){this.editRow.sum=s.a.round2(Number(e))}}},methods:{close:function(){this.$emit("close")},saveRow:function(){this.$emit("done",this.editRow)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{staticClass:"form-dialog-bottom form-dialog",attrs:{"max-width":"550px",persistant:"",fullscreen:e.$vuetify.breakpoint.smAndDown},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-toolbar",{staticClass:"form-dialog-top",attrs:{dense:"",color:"appColor",dark:""}},[n("v-btn",{attrs:{flat:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{flat:""},on:{click:function(t){return e.saveRow(e.editRow)}}},[e._v("Ok")])],1),e._v(" "),n("v-card",{staticClass:"form-dialog-bottom"},[n("v-card-text",[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm6:"",md6:"",lg6:""}},[n("v-autocomplete",{attrs:{label:"Item",items:e.items,autocomplete:"true","cache-items":"",clearable:"",outline:"","single-line":"","item-text":"name","item-value":"id","return-object":""},model:{value:e.editRow.item,callback:function(t){e.$set(e.editRow,"item",t)},expression:"editRow.item"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md6:"",lg6:""}},[n("v-text-field",{attrs:{outline:"",type:"number",clearable:"",label:"Amount"},model:{value:e.amount,callback:function(t){e.amount=e._n(t)},expression:"amount"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[n("v-textarea",{attrs:{outline:"",label:"Comment"},model:{value:e.editRow.comment,callback:function(t){e.$set(e.editRow,"comment",t)},expression:"editRow.comment"}})],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(e){n("u8bN")},"data-v-65a9eb35",null);t.a=a.exports}});
//# sourceMappingURL=expense-form.bed8066861252caf19fd.js.map